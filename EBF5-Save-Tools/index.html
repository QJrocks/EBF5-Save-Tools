<!doctype html>
<html>
<head>
	<title>EBF5 Save File Tools</title>
	
	<style> 
		html *
		{
		   font-size: 1em;
		   color: #000;
		   font-family: Verdana !important;
		   background-color: #7AF;
		}
		
		input[type=text] {
			border-width: 2px;
			border-style: solid;
			border-color: #FFF;
		}
		
		details {
			padding: 5px;
			border-width: 2px;
			border-style: solid;
			border-color: #37A;
			border-radius: 5px;
		}
		
		.note
		{
			font-size: 0.8em;
			color: #F00;
		}
		
		.clickButton {
		  background-color: #7F9CCB;
		  padding: 5px 10px;
		  border-radius: 5px;
		  border: 1px ridge black;
		  font-size: 0.8rem;
		  height: auto;
		}

		.clickButton:hover {
		  background-color: #2D5BA3;
		  color: white;
		}

		.clickButton:active {
		  background-color: #0D3F8F;
		  color: white;
		}
		
		.equip {
			background: url(equip_spritesheet.png);
			display: block;
			height: 80px;
			width: 80px;
		}
		
		.hide {
			display: none;
		}
		
		.darkened {
			-webkit-filter:brightness(25%);
			-moz-filter:brightness(25%);
			filter: url(#brightness); /* required for FF */
			filter:brightness(25%);
		}
		</style>
		
	<link rel="stylesheet" href="equip_styles.css"/>
	
	<script src = "localization.js"></script>
	
	<script src = "fullEquipList.js"></script>
	
	<script src = "defaultFile.js"></script>
	
	<script>
		var inputFileName
		var fileString
		var fileObj
		
		var dropdownOpener;
		var dropdownPlayer;
		var dropdownEquipSlot;
		
		function openEquipDropdown(parentElement, player, equipType) {
			//An attempt to make calling this function a little less magic-number-y
			const players = new Array("Matt", "Natz", "Lance", "Anna", "NoLegs");
			//Which equipment takes up which slot (for example, all weapons are in the top-left)
			// 0 1 2
			// 3 4 5
			const equipSlots = {
				"sword": 0,
				"staff": 0,
				"gun": 0,
				"bow": 0,
				"toy": 0,
				"armorm": 1,
				"armorf":1,
				"hatm": 2,
				"hatf": 2,
				"flair1": 3,
				"flair2": 4,
				"flair3": 5
			}
			
			dropdownOpener = parentElement;
			if(player !== null) { //bit of jank code here for changeDropdownTab, may refactor this into its own variable or something to make it cleaner
				dropdownPlayer = players.indexOf(player);
				dropdownEquipSlot = equipSlots[equipType];
			}
			
			if(equipType === "flair1" || equipType === "flair2" || equipType === "flair3") {
				equipType = "flair";
			}
			
			//list of equipment tabs
			const equipTabs = new Array("sword", "staff", "gun", "bow", "toy", "hatm", "armorm", "hatf", "armorf", "flair");
			
			//darken all tabs
			let allTabs = document.getElementsByClassName("dropdownTab");
			for(const tab of allTabs) {
				tab.classList.add("darkened");
			}
			//un-darken selected tab
			let selectedTabIndex = equipTabs.indexOf(equipType);
			allTabs[selectedTabIndex].classList.remove("darkened");
			
			let dropdownContainer = document.getElementById("dropdownBackground");
			let dropdownElement = document.getElementById("dropdownTable");
			dropdownContainer.classList.remove("hide");
			
			dropdownElement.innerHTML = generateEquipTableHTML(equipType, "position:relative; top: 20px; z-index: 100", "'" + "setEquipDropdown(this.className.split(&quot; &quot;)[1])" + "'");
		}
		
		function generateEquipTableHTML(equipType, tableStyleString, onclickString) {
			let equipAmount = 21;
			let equipsPerRow = 7;
			if(equipType === "flair") {
				equipAmount = 55;
				equipsPerRow = 11;
			}
			let equipRows = equipAmount / equipsPerRow;
			
			let entireTableString = "<table style='" + tableStyleString + "'>";
			for(let x = 0; x < equipRows; x++) {
				entireTableString += "<tr>";
				for(let y = 0; y < equipsPerRow; y++) {
					//Since this mess is littered with all sort of string-manipulating nonsense, here's what a standard output for these lines might look like:
					//<span class="equip staff15" onclick="setEquipDropdown(this.className.split(&quot; &quot;)[1])"></span>
					let equipID = equipType + (x * equipsPerRow + y);
					let classString = "'" + "equip " + equipID + "'";
					//Since we're using single-quotes to wrap the string, we need to replace apostrophes in equipment names with &apos;
					let hoverString = "'" + localization["english"][equipID].replace("'", "&apos;") + "'";
					entireTableString += "<td><span class=" + classString + " onclick=" + onclickString + " title=" + hoverString + "></td>";
				}
				entireTableString +=  "</tr>";
			}
			entireTableString +=  "</table>";
			return entireTableString;
		}
		
		var changeDropdownWarning = true;
		function changeDropdownTab(event, val) { //takes in an additinoal event variable to prevent the dropdown from closing
			event.stopPropagation();
			openEquipDropdown(dropdownOpener, null, val);
			if(changeDropdownWarning === true) {
				window.alert("WARNING! While assigning equipment to the wrong slot generally works, certain combinations can result in the game or your save file being softlocked. Proceed with caution!")
				changeDropdownWarning = false;
			}
		}
		
		function setEquipDropdown(val) {
			dropdownOpener.className = "equip " + val;
			dropdownOpener.title = localization["english"][val];
			fileObj.playerData[dropdownPlayer][3][dropdownEquipSlot] = allEquips.indexOf(val);
		}
		
		function closeEquipDropdown() {
			document.getElementById("dropdownBackground").classList.add('hide');
			document.getElementById("dropdownTable").innerHTML = "";
			var dropdowns = document.getElementsByClassName("equipDropdown");
			for (let element of dropdowns) {
				element.classList.add('hide');
			}
		}
	
		//reads in the file and base64-decodes it into a usable string.
		function readFile(input) {
			let file = input.files[0]; 
			let fileReader = new FileReader(); 
			fileReader.readAsText(file); 
			fileReader.onload = function() {
				inputFileName = file.name
				fileString = atob(fileReader.result)
				loadFile(false);
			}; 
			fileReader.onerror = function() {
				alert(fileReader.error);
			}; 
		}	
		
		function loadDefaultFile() {
			inputFileName = "default.meow"
			fileString = atob(defaultFileString)
			loadFile(false);
		}

		function loadFile(prevLoaded) {
			document.getElementById("everything").style = "display:block"
			document.getElementById("result").innerText = ""
			fileObj = JSON.parse(fileString)
			
			document.getElementById("currentSP").value = fileObj.misc[0]
			document.getElementById("maxSP").value = fileObj.misc[1]
			document.getElementById("gold").value = fileObj.misc[2]
			
			//load data for the players
			let charNames = new Array("matt", "natz", "lance", "anna", "nolegs");
			
			for(let x = 0; x < 5; x++) {
				let name = charNames[x]
				document.getElementById(name+"LVL").value = fileObj.playerData[x][0];
				document.getElementById(name+"EXP").value = fileObj.playerData[x][5];
				document.getElementById(name+"AP").value = fileObj.playerData[x][6];
				document.getElementById(name+"Limit").value = fileObj.playerData[x][2];
			
				//Steroids are matched to multiple stats, but the stat multipliers are independent to each stat.
				//To convert multipliers to steroid amounts, I opt to use the Attack/Magic Attack/Accuracy stats instead of the Defense/Magic Defense/Evade ones.
				//They should be the same, so it shouldn't change anything, but it's good to note.		
				document.getElementById(name+"ADstr").value = (fileObj.playerData[x][1][1] - 100) / 2;
				document.getElementById(name+"MMstr").value = (fileObj.playerData[x][1][2] - 100) / 2;
				document.getElementById(name+"EAstr").value = (fileObj.playerData[x][1][3] - 100);
				document.getElementById(name+"HPstr").value = (fileObj.playerData[x][1][0] - 100) / 2;
				
				//Set up both classes for equip displays and titles for hovertext
				document.getElementById(name+"Weapon").className = "equip " + allEquips[fileObj.playerData[x][3][0]];
				document.getElementById(name+"Weapon").title = localization["english"][allEquips[fileObj.playerData[x][3][0]]];
				document.getElementById(name+"Hat").className = "equip " + allEquips[fileObj.playerData[x][3][2]];
				document.getElementById(name+"Hat").title = localization["english"][allEquips[fileObj.playerData[x][3][2]]];
				document.getElementById(name+"Armor").className = "equip " + allEquips[fileObj.playerData[x][3][1]];
				document.getElementById(name+"Armor").title = localization["english"][allEquips[fileObj.playerData[x][3][1]]];
				document.getElementById(name+"Flair1").className = "equip " + allEquips[fileObj.playerData[x][3][3]];
				document.getElementById(name+"Flair1").title = localization["english"][allEquips[fileObj.playerData[x][3][3]]];
				document.getElementById(name+"Flair2").className = "equip " + allEquips[fileObj.playerData[x][3][4]];
				document.getElementById(name+"Flair2").title = localization["english"][allEquips[fileObj.playerData[x][3][4]]];
				document.getElementById(name+"Flair3").className = "equip " + allEquips[fileObj.playerData[x][3][5]];
				document.getElementById(name+"Flair3").title = localization["english"][allEquips[fileObj.playerData[x][3][5]]];
			}
			
			updatePlayerStats();
			
			//now set up the custom game flags since they're easy
			document.getElementById("foeRemix").checked = fileObj["altFoes"];
			document.getElementById("weatherRemix").checked = fileObj["altWeather"];
			document.getElementById("equipRemix").checked = fileObj["altEquipStats"];
			document.getElementById("randomEquips").checked = fileObj["altEquipLocations"];
			document.getElementById("randomEquipsSeed").value = fileObj["seed"];
			document.getElementById("scalingFoes").checked = fileObj["alwaysScaleFoes"];
			document.getElementById("3Pbattles").checked = fileObj["threePlayerMode"];
			document.getElementById("2Pbattles").checked = fileObj["twoPlayerMode"];
			document.getElementById("1Pbattles").checked = fileObj["onePlayerMode"];
			document.getElementById("limitLimitedPlayers").checked = false;
			
			if(fileObj["altEquipLocations"] === true) {
				calculateRandEquips(prevLoaded)
			}
		}
		
		function saveFile() {
			if(fileObj === undefined) {
				window.alert("Load a file, first!");
				return;
			}
		
			//Append "_edited" at the end of the filename to help avoid file corruption (original file is intact)
			let filename = inputFileName.split('.')[0] + "_edited.meow";
			let encoded = btoa(JSON.stringify(fileObj));
			let text = ""
			//Adobe Flash's Base64 encoding default is slightly different from JavaScript's, in that every 76 characters a newline is added.
			//See https://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/utils/Base64Encoder.html for more details.
			//In any case, it's important to replicate that behavior here for maximum compatibility.
			for(let x = 0; x < encoded.length; x += 76) {
				text += encoded.substring(x, x + 76);
				text += String.fromCharCode(10);
			}
			
			if(text.charCodeAt(text.length - 1) == 10) {
				text = text.substring(0, text.length - 1);
			}
			
			var pom = document.createElement('a');
			pom.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));
			pom.setAttribute('download', filename);

			if (document.createEvent) {
				var event = document.createEvent('MouseEvents');
				event.initEvent('click', true, true);
				pom.dispatchEvent(event);
			}
			else {
				pom.click();
			}
		}
		
		function updateLimitedPlayerBattles() {
			fileObj.threePlayerMode = document.getElementById('3Pbattles').checked;
			fileObj.twoPlayerMode = document.getElementById('2Pbattles').checked;
			fileObj.onePlayerMode = document.getElementById('1Pbattles').checked;
		}
		
		function setLimitedPlayerInput(limited) {
			if(limited) {
				document.getElementById('3Pbattles').type = 'checkbox';
				document.getElementById('2Pbattles').type = 'checkbox';
				document.getElementById('1Pbattles').type = 'checkbox';
			}
			else {
				document.getElementById('3Pbattles').type = 'radio';
				document.getElementById('2Pbattles').type = 'radio';
				document.getElementById('1Pbattles').type = 'radio';
			}
		}
		
		function updatePlayerStats() {
			
		}
		
		class EquipSet {
			size = 0
			//Internally, the game uses string matching for equipment (for example, the Flame Badge's internal ID is "firebadge")
			//I'm using a more generic string system just for ease of use (less copy-pasting from game files)
			equipIDs = []
			equipSelected = []
			nameString = ""
			seedString = ""

			constructor(size, nameString) {
				this.size = size;
				this.nameString = nameString
				this.seedString = nameString.substring(1, 3)

				for (let x = 0; x < size; x++) {
					this.equipSelected.push(false);
					this.equipIDs.push(nameString + x)
				}
			}

			equipsAvailable() {
				for (let x = 0; x < this.size; x++) {
					if (this.equipSelected[x] === false) {
						return true;
					}
				}
				return false;
			}
			
			getNextEquip() {
				let randSelect = 0;
				let seed = fileObj.seed + this.seedString.charCodeAt(0) + this.seedString.charCodeAt(1);
				do
				{
					randSelect = (randSelect += seed + 1) % this.size;
					seed = Math.floor(seed / 1.1);
					if (this.equipSelected[randSelect] === false) {
						return this.equipIDs[randSelect]
					}
				} while (this.equipsAvailable() === true);
				return "invalid";
			}
			
			acquireEquip() {
				let equipID = this.getNextEquip();
				let equipIndex = this.equipIDs.indexOf(equipID)
				this.equipSelected[equipIndex] = true;
				return equipID
			}
			
			swapEquips(prevEquip) {
				let prevID = this.equipIDs.indexOf(prevEquip)
				let newEquip = this.acquireEquip()
				this.equipSelected[prevID] = false;
				return newEquip
			}
			
			markEquipped(currentEquip) {
				let equipIndex = this.equipIDs.indexOf(currentEquip)
				this.equipSelected[equipIndex] = true;
			}
		};

		function printEquips(equipArray, resultElement) {
			for(let x = 0; x < equipArray.length; x++) {
				resultElement.innerText += localization["english"][equipArray[x]];
				if(x != equipArray.length - 1) {
					resultElement.innerText += ",\xa0"
				}
			}
		}

		function calculateRandEquips(prevLoaded) {
			let swords = new EquipSet(21, 'sword');
			let staffs = new EquipSet(21, 'staff');
			let guns = new EquipSet(21, 'gun');
			let bows = new EquipSet(21, 'bow');
			let toys = new EquipSet(21, 'toy');
			let hatsM = new EquipSet(21, 'hatm');
			let armorM = new EquipSet(21, 'armorm');
			let hatsF = new EquipSet(21, 'hatf');
			let armorF = new EquipSet(21, 'armorf');
			let flairs = new EquipSet(55, 'flair');
			
			let seed = fileObj.seed
			
			let resultElement = document.getElementById("result");

			hatsM.markEquipped("hatm0");
			hatsM.markEquipped("hatm1");
			hatsM.markEquipped("hatm8");
			
			armorM.markEquipped("armorm15");
			armorM.markEquipped("armorm1");
			armorM.markEquipped("armorm8");
			
			hatsF.markEquipped("hatf0");
			hatsF.markEquipped("hatf1");
			
			armorF.markEquipped("armorf0");
			armorF.markEquipped("armorf1");
			
			let shopItems = new Array();
			shopItems.push(hatsM.acquireEquip(), hatsF.acquireEquip(), armorM.acquireEquip(), armorF.acquireEquip(), flairs.acquireEquip(), swords.acquireEquip(), staffs.acquireEquip(), guns.acquireEquip(), bows.acquireEquip(), toys.acquireEquip(), hatsM.acquireEquip(), hatsF.acquireEquip(), hatsM.acquireEquip(), hatsF.acquireEquip(), flairs.acquireEquip(), swords.acquireEquip(), staffs.acquireEquip(), bows.acquireEquip(), toys.acquireEquip(), flairs.acquireEquip(), armorM.acquireEquip(), armorF.acquireEquip())
			
			resultElement.innerText += "\nShop items: "
			printEquips(shopItems, resultElement)
			
			let mattEquips = new Array(swords.acquireEquip(), hatsM.swapEquips("hatm0"), armorM.swapEquips("armorm15"));			
			let natzEquips = new Array(staffs.acquireEquip(), hatsF.swapEquips("hatf0"), armorF.swapEquips("armorf0"));
			let lanceEquips = new Array(guns.acquireEquip(), hatsM.swapEquips("hatm8"), armorM.swapEquips("armorm8"));
			let annaEquips = new Array(bows.acquireEquip(), hatsF.swapEquips("hatf1"), armorF.swapEquips("armorf1"));
			let nolegsEquips = new Array(toys.acquireEquip(), hatsM.swapEquips("hatm1"), armorM.swapEquips("armorm1"));
			
			/*resultElement.innerText += "\nMatt equips: "
			printEquips(mattEquips, resultElement);
			resultElement.innerText += "\nNatz equips: "
			printEquips(natzEquips, resultElement);
			resultElement.innerText += "\nLance equips: "
			printEquips(lanceEquips, resultElement);
			resultElement.innerText += "\nAnna equips: "
			printEquips(annaEquips, resultElement);
			resultElement.innerText += "\nNoLegs equips: "
			printEquips(nolegsEquips, resultElement);
			
			resultElement.innerText += "\nSword Order: "
			printEquips(swordList, resultElement);
			resultElement.innerText += "\n Staff Order: "
			printEquips(staffList, resultElement);
			resultElement.innerText += "\n Gun Order: "
			printEquips(gunList, resultElement);
			resultElement.innerText += "\n Bow Order: "
			printEquips(bowList, resultElement);
			resultElement.innerText += "\n Toy Order: "
			printEquips(toyList, resultElement);
			resultElement.innerText += "\n Male Hat Order: "
			printEquips(hatsMList, resultElement);
			resultElement.innerText += "\n Male Armor Order: "
			printEquips(armorMList, resultElement);
			resultElement.innerText += "\n Female Hat Order: "
			printEquips(hatsFList, resultElement);
			resultElement.innerText += "\n Female Armor Order: "
			printEquips(armorFList, resultElement);
			resultElement.innerText += "\n Flair Order: "
			printEquips(flairList, resultElement);*/
		}
	</script>
</head>

<body>
<!-- Before any of the actual webpage content, here's the HTML for the equip dropdown for selecting equipment.
It has a screen-wide div which closes the dropdown on clicking. Inside the div is where the equip table itself is generated from the openEquipDropdown method.
It's all hidden by default, of course. -->
	<div class = "hide" id = "dropdownBackground" style="position: fixed;
		left: 0;
		top: 0;
		right: 0;
		bottom: 0;
		background: rgba(0, 0, 0, 0.5);
		z-index: 50;" onclick = "closeEquipDropdown()">
		<!-- First, the row of tabs for switching between types -->
		<table><tr>
		<td><span class = "equip dropdownTab sword0" onclick = "changeDropdownTab(event, 'sword')"></span></td>
		<td><span class = "equip dropdownTab staff13" onclick = "changeDropdownTab(event, 'staff')"></span></td>
		<td><span class = "equip dropdownTab gun7" onclick = "changeDropdownTab(event, 'gun')"></span></td>
		<td><span class = "equip dropdownTab bow0" onclick = "changeDropdownTab(event, 'bow')"></span></td>
		<td><span class = "equip dropdownTab toy17" onclick = "changeDropdownTab(event, 'toy')"></span></td>
		<td><span class = "equip dropdownTab hatm0" onclick = "changeDropdownTab(event, 'hatm')"></span></td>
		<td><span class = "equip dropdownTab armorm15" onclick = "changeDropdownTab(event, 'armorm')"></span></td>
		<td><span class = "equip dropdownTab hatf0" onclick = "changeDropdownTab(event, 'hatf')"></span></td>
		<td><span class = "equip dropdownTab armorf0" onclick = "changeDropdownTab(event, 'armorf')"></span></td>
		<td><span class = "equip dropdownTab flair11" onclick = "changeDropdownTab(event, 'flair')"></span></td>
		</tr></table>
		<!-- Equipment table is placed here! -->
		<div id = "dropdownTable"> </div>
	</div>

<br>
<!-- First, buttons for loading / saving files -->
<label for="loader" class="clickButton">Load Existing File From PC</label>
<input id = "loader" onchange="readFile(this)" accept=".meow" type=file style="display:none" />
<br>
<input value = "Load Default File" class="clickButton" onclick = "loadDefaultFile()" type=button />
<br>
<input value = "Save File" class="clickButton" onclick = "saveFile()" type=button />
<br>
<br>
<!-- The "everything" span is hidden until a file is loaded-->
<span id = "everything" style="display:none">
	<!-- First block for general save file statistics -->
	<details open>
		<summary>General Stats</summary>
		<!-- All stat blocks have in-line script code to set the relevant variable in the fileObj object. This may not be the cleanest way to do it, but it keeps the code local to the input boxes that modify it. -->
		<!-- The misc array stores current SP, max SP, gold, and summon power, in that order. -->
		SP: <input type="text" id="currentSP" size="3" 
		onchange="fileObj.misc[0] = this.value" 
		/>
		/
		<!-- Since MaxSP as an editable value has very little use, display a note while it is selected -->
		<input type="text" id="maxSP" size="3" 
		onchange="fileObj.misc[1] = this.value" 
		onfocus = "document.getElementById('SPnote').style = 'display:inline'" 
		onblur = "document.getElementById('SPnote').style = 'display:none'"
		/>
		<span id = "SPnote" class="note" style = 'display:none'>!!! While this is editable, the game overwrites this values upon loading (and caps current SP), so it doesn't do much.</span>
		<br>
		Gold: <input type="text" id="gold" size="10" onchange="fileObj.misc[2] = this.value"  />
	</details>
	<br>
	<details>
		<summary>Custom Game</summary>
		(icon) Foe Remix <input type="checkbox" id="foeRemix" onchange="fileObj.altFoes = this.checked"  /><br>
		(icon) Weather Remix <input type="checkbox" id="weatherRemix" onchange="fileObj.altWeather = this.checked"  /><br>
		(icon) Equip Remix <input type="checkbox" id="equipRemix" onchange="fileObj.altEquipStats = this.checked"  /><br>
		(icon) Random Equips <input type="checkbox" id="randomEquips" onchange="fileObj.altEquipLocations = this.checked"  /><br>
		(indent this please) Random Equip Seed: <input type="text" id="randomEquipsSeed" size="10" onchange="fileObj.seed = Number(this.value)"  /><br>
		(icon) Scaling Foes <input type="checkbox" id="scalingFoes" onchange="fileObj.alwaysScaleFoes = this.checked"  /><br>
		<br>
		(icon) All-Player Battles <input type="radio" name="limitedPlayers" onchange="updateLimitedPlayerBattles()"  /> (default) <br>
		(icon) 3-Player Battles <input type="radio" name="limitedPlayers" id="3Pbattles" onchange="updateLimitedPlayerBattles()"  /><br>
		(icon) 2-Player Battles <input type="radio" name="limitedPlayers" id="2Pbattles" onchange="updateLimitedPlayerBattles()"  /><br>
		(icon) 1-Player Battles <input type="radio" name="limitedPlayers" id="1Pbattles" onchange="updateLimitedPlayerBattles()"  /><br>
		(indent) Allow individual toggles <input type="checkbox" id="limitLimitedPlayers" onchange="setLimitedPlayerInput(this.checked); updateLimitedPlayerBattles()"  /><br> <!-- This is more advanced than a 1-liner so it gets its own function -->
		<span id = "PlayerBattles" class="note" style = 'display:none'>!!! If multiple player battle options are selected, the lowest-count takes priority.<br>
		However, each option has certain multipliers for enemy stats and status chances, and these multipliers stack with each other.<br>
		(For example, enemies would have ~21% health and ~40% single-target damage with all three on.</span>
		<br>
		
		<details>
			<summary>Equip Remix Obtain Order</summary>
			Equip Remix works as such:
			The game uses a "seed" value in the save file and generates a new random order in which said equipment is obtained.
			Whenever you would obtain an equipment of a specific type, you'll get the next equipment you don't have from the list.
			(If you haven't "recruited" Lance, some equips may be slightly out-of-order due to a programming quirk. To ensure a truly correct order, then save, quit, and reload the file.)
			
			<p id = "result">wow</p>
		</details>
	</details>
	<br>
	
	<!-- Giant stats table for the player-relevant save data.
	Most of this is within the playerData table, which is stored in unlabelled array indices.
	Therefore, I will label them here.
	0 = Player level
	1 = Steroid boost multiplier (Starts at 100)
	2 = Limit charge, 0-100
	3 = Array equipment IDs (numerical IDs)
	4 = skill ids?
	5 = Player EXP (Applied after player level)
	6 = Player AP
	7 = limit ids?
	8 = If player is dead (true/false, unused in game)
	-->
	<details open>
		<summary>Character Stats and Equips</summary>
		<table>
		  <tr>
			<th>Matt</th>
			<th>Natz</th>
			<th>Lance</th>
			<th>Anna</th>
			<th>NoLegs</th>
		  </tr>
		  <tr>
			<!-- Levels -->
			<td>Level: <input type="text" id="mattLVL" size="2" onchange="fileObj.playerData[0][0] = this.value; updatePlayerStats()"/> </td>
			<td>Level: <input type="text" id="natzLVL" size="2" onchange="fileObj.playerData[1][0] = this.value; updatePlayerStats()"/> </td>
			<td>Level: <input type="text" id="lanceLVL" size="2" onchange="fileObj.playerData[2][0] = this.value; updatePlayerStats()"/> </td>
			<td>Level: <input type="text" id="annaLVL" size="2" onchange="fileObj.playerData[3][0] = this.value; updatePlayerStats()"/> </td>
			<td>Level: <input type="text" id="nolegsLVL" size="2" onchange="fileObj.playerData[4][0] = this.value; updatePlayerStats()"/> </td>
		  </tr>
		  <tr>
			<!-- EXP -->
			<td>EXP: <input type="text" id="mattEXP" size="7" onchange="fileObj.playerData[0][5] = this.value"/> </td>
			<td>EXP: <input type="text" id="natzEXP" size="7" onchange="fileObj.playerData[1][5] = this.value"/> </td>
			<td>EXP: <input type="text" id="lanceEXP" size="7" onchange="fileObj.playerData[2][5] = this.value"/> </td>
			<td>EXP: <input type="text" id="annaEXP" size="7" onchange="fileObj.playerData[3][5] = this.value"/> </td>
			<td>EXP: <input type="text" id="nolegsEXP" size="7" onchange="fileObj.playerData[4][5] = this.value"/> </td>
		  </tr>
		  <tr>
			<!-- AP -->
			<td>AP: <input type="text" id="mattAP" size="6" onchange="fileObj.playerData[0][6] = this.value"/> </td>
			<td>AP: <input type="text" id="natzAP" size="6" onchange="fileObj.playerData[1][6] = this.value"/> </td>
			<td>AP: <input type="text" id="lanceAP" size="6" onchange="fileObj.playerData[2][6] = this.value"/> </td>
			<td>AP: <input type="text" id="annaAP" size="6" onchange="fileObj.playerData[3][6] = this.value"/> </td>
			<td>AP: <input type="text" id="nolegsAP" size="6" onchange="fileObj.playerData[4][6] = this.value"/> </td>
		  </tr>
		  <tr>
			<!-- LIMIT -->
			<td>Limit: <input type="range" min="0" max="100" id="mattLimit" size="5" onchange="fileObj.playerData[0][2] = this.value"/> </td>
			<td>Limit: <input type="range" min="0" max="100" id="natzLimit" size="5" onchange="fileObj.playerData[1][2] = this.value"/> </td>
			<td>Limit: <input type="range" min="0" max="100" id="lanceLimit" size="5" onchange="fileObj.playerData[2][2] = this.value"/> </td>
			<td>Limit: <input type="range" min="0" max="100" id="annaLimit" size="5" onchange="fileObj.playerData[3][2] = this.value"/> </td>
			<td>Limit: <input type="range" min="0" max="100" id="nolegsLimit" size="5" onchange="fileObj.playerData[4][2] = this.value"/> </td>
		  </tr>
		  <tr>
			<!-- Nested table for amount of steroids used -->
			<!-- Instead of storing the multipliers, they're converted to steroid amounts upon loading and converted back upon saving.
			The ID acronyms stand for "Attack/Defense", "Magic Attack/Magic Defense", "Evade/Accuracy", and "HP" -->
			<td><table>
				<td>ADstr<input type="text" id="mattADstr" size="2" onchange="fileObj.playerData[0][1][1]=(this.value*2)+100; fileObj.playerData[0][1][4]=(this.value*2)+100; updatePlayerStats()"/></td>
				<td>MMstr<input type="text" id="mattMMstr" size="2" onchange="fileObj.playerData[0][1][2]=(this.value*2)+100; fileObj.playerData[0][1][5]=(this.value*2)+100; updatePlayerStats()"/></td>
				<td>EAstr<input type="text" id="mattEAstr" size="2" onchange="fileObj.playerData[0][1][3]=this.value+100; fileObj.playerData[0][1][6]=this.value+100; updatePlayerStats()"/></td>
				<td>HPstr<input type="text" id="mattHPstr" size="2" onchange="fileObj.playerData[0][1][0]=(this.value*2)+100; updatePlayerStats()"/></td>
			</table></td>
			<td><table>
				<td>ADstr<input type="text" id="natzADstr" size="2" onchange="fileObj.playerData[1][1][1]=(this.value*2)+100; fileObj.playerData[0][1][4]=(this.value*2)+100; updatePlayerStats()"/></td>
				<td>MMstr<input type="text" id="natzMMstr" size="2" onchange="fileObj.playerData[1][1][2]=(this.value*2)+100; fileObj.playerData[0][1][5]=(this.value*2)+100; updatePlayerStats()"/></td>
				<td>EAstr<input type="text" id="natzEAstr" size="2" onchange="fileObj.playerData[1][1][3]=this.value+100; fileObj.playerData[0][1][6]=this.value+100; updatePlayerStats()"/></td>
				<td>HPstr<input type="text" id="natzHPstr" size="2" onchange="fileObj.playerData[1][1][0]=(this.value*2)+100; updatePlayerStats()"/></td>
			</table></td>
			<td><table>
				<td>ADstr<input type="text" id="lanceADstr" size="2" onchange="fileObj.playerData[2][1][1]=(this.value*2)+100; fileObj.playerData[0][1][4]=(this.value*2)+100; updatePlayerStats()"/></td>
				<td>MMstr<input type="text" id="lanceMMstr" size="2" onchange="fileObj.playerData[2][1][2]=(this.value*2)+100; fileObj.playerData[0][1][5]=(this.value*2)+100; updatePlayerStats()"/></td>
				<td>EAstr<input type="text" id="lanceEAstr" size="2" onchange="fileObj.playerData[2][1][3]=this.value+100; fileObj.playerData[0][1][6]=this.value+100; updatePlayerStats()"/></td>
				<td>HPstr<input type="text" id="lanceHPstr" size="2" onchange="fileObj.playerData[2][1][0]=(this.value*2)+100; updatePlayerStats()"/></td>
			</table></td>
			<td><table>
				<td>ADstr<input type="text" id="annaADstr" size="2" onchange="fileObj.playerData[3][1][1]=(this.value*2)+100; fileObj.playerData[0][1][4]=(this.value*2)+100; updatePlayerStats()"/></td>
				<td>MMstr<input type="text" id="annaMMstr" size="2" onchange="fileObj.playerData[3][1][2]=(this.value*2)+100; fileObj.playerData[0][1][5]=(this.value*2)+100; updatePlayerStats()"/></td>
				<td>EAstr<input type="text" id="annaEAstr" size="2" onchange="fileObj.playerData[3][1][3]=this.value+100; fileObj.playerData[0][1][6]=this.value+100; updatePlayerStats()"/></td>
				<td>HPstr<input type="text" id="annaHPstr" size="2" onchange="fileObj.playerData[3][1][0]=(this.value*2)+100; updatePlayerStats()"/></td>
			</table></td>
			<td><table>
				<td>ADstr<input type="text" id="nolegsADstr" size="2" onchange="fileObj.playerData[4][1][1]=(this.value*2)+100; fileObj.playerData[0][1][4]=(this.value*2)+100; updatePlayerStats()"/></td>
				<td>MMstr<input type="text" id="nolegsMMstr" size="2" onchange="fileObj.playerData[4][1][2]=(this.value*2)+100; fileObj.playerData[0][1][5]=(this.value*2)+100; updatePlayerStats()"/></td>
				<td>EAstr<input type="text" id="nolegsEAstr" size="2" onchange="fileObj.playerData[4][1][3]=this.value+100; fileObj.playerData[0][1][6]=this.value+100; updatePlayerStats()"/></td>
				<td>HPstr<input type="text" id="nolegsHPstr" size="2" onchange="fileObj.playerData[4][1][0]=(this.value*2)+100; updatePlayerStats()"/></td>
			</table></td>
		  </tr>
		  <tr>
			<!-- Nested 2x3 table for character equips -->
			<td><table>
				<tr>
					<td><span id="mattWeapon" onclick="openEquipDropdown(this, 'Matt', 'sword');"/></td>
					<td><span id="mattHat" onclick="openEquipDropdown(this, 'Matt', 'hatm');"/></td>
					<td><span id="mattArmor" onclick="openEquipDropdown(this, 'Matt', 'armorm');"/></td>
				</tr>
				<tr>
					<td><span id="mattFlair1" onclick="openEquipDropdown(this, 'Matt', 'flair1');"/></td>
					<td><span id="mattFlair2" onclick="openEquipDropdown(this, 'Matt', 'flair2');"/></td>
					<td><span id="mattFlair3" onclick="openEquipDropdown(this, 'Matt', 'flair3');"/></td>
				</tr>
			</table></td>
			<td><table>
				<tr>
					<td><span id="natzWeapon" onclick="openEquipDropdown(this, 'Natz', 'staff');"></span></td>
					<td><span id="natzHat" onclick="openEquipDropdown(this, 'Natz', 'hatf');"/></td>
					<td><span id="natzArmor" onclick="openEquipDropdown(this, 'Natz', 'armorf');"/></td>
				</tr>
				<tr>
					<td><span id="natzFlair1" onclick="openEquipDropdown(this, 'Natz', 'flair1');"/></td>
					<td><span id="natzFlair2" onclick="openEquipDropdown(this, 'Natz', 'flair2');"/></td>
					<td><span id="natzFlair3" onclick="openEquipDropdown(this, 'Natz', 'flair3');"/></td>
				</tr>
			</table></td>
			<td><table>
				<tr>
					<td><span id="lanceWeapon" onclick="openEquipDropdown(this, 'Lance', 'gun');"/></td>
					<td><span id="lanceHat" onclick="openEquipDropdown(this, 'Lance', 'hatm');"/></td>
					<td><span id="lanceArmor" onclick="openEquipDropdown(this, 'Lance', 'armorm');"/></td>
				</tr>
				<tr>
					<td><span id="lanceFlair1" onclick="openEquipDropdown(this, 'Lance', 'flair1');"/></td>
					<td><span id="lanceFlair2" onclick="openEquipDropdown(this, 'Lance', 'flair2');"/></td>
					<td><span id="lanceFlair3" onclick="openEquipDropdown(this, 'Lance', 'flair3');"/></td>
				</tr>
			</table></td>
			<td><table>
				<tr>
					<td><span id="annaWeapon" onclick="openEquipDropdown(this, 'Anna', 'bow');"/></td>
					<td><span id="annaHat" onclick="openEquipDropdown(this, 'Anna', 'hatf');"/></td>
					<td><span id="annaArmor" onclick="openEquipDropdown(this, 'Anna', 'armorf');"/></td>
				</tr>
				<tr>
					<td><span id="annaFlair1" onclick="openEquipDropdown(this, 'Anna', 'flair1');"/></td>
					<td><span id="annaFlair2" onclick="openEquipDropdown(this, 'Anna', 'flair2');"/></td>
					<td><span id="annaFlair3" onclick="openEquipDropdown(this, 'Anna', 'flair3');"/></td>
				</tr>
			</table></td>
			<td><table>
				<tr>
					<td><span id="nolegsWeapon" onclick="openEquipDropdown(this, 'NoLegs', 'toy');"/></td>
					<td><span id="nolegsHat" onclick="openEquipDropdown(this, 'NoLegs', 'hatm');"/></td>
					<td><span id="nolegsArmor" onclick="openEquipDropdown(this, 'NoLegs', 'armorm');"/></td>
				</tr>
				<tr>
					<td><span id="nolegsFlair1" onclick="openEquipDropdown(this, 'NoLegs', 'flair1');"/></td>
					<td><span id="nolegsFlair2" onclick="openEquipDropdown(this, 'NoLegs', 'flair2');"/></td>
					<td><span id="nolegsFlair3" onclick="openEquipDropdown(this, 'NoLegs', 'flair3');"/></td>
				</tr>
			</table></td>
		  </tr>
		</table>
	</details>
	<br>
	<span style = "font-size:90px"> !!! --- EVERYTHING BELOW IS NOT IMPLEMENTED AND IS MAINLY THERE FOR ORGANIZATION PURPOSES --- !!! </span>
	<details open>
		<summary>Player Skills and Limits</summary>
		Work in progress!
	</details>
	<br>
	<details open>
		<summary>Obtained Equipment and Levels</summary>
		<input value = "Obtain/Remove equipment" class="clickButton" onclick = "//window.alert('me when the')" type=button />
	</details>
	<br>
	<details open>
		<summary>Consumable Items</summary>
		food/crafting
	</details>
	<br>
	<details open>
		<summary>Steroids</summary>
		amount held and costs
	</details>
	<br>
	<details open>
		<summary>Key Items</summary>
		food/crafting
	</details>
</span>

This is currently pretty incomplete!<br>
Up next is getting some more icons from the game - can't have placeholder text forever! <br>
<br>
This site was made possible through reverse engineering game files using FFDec. <br>
Epic Battle Fantasy and all its graphics you see here (also taken from game files) are owned by Matt Roszak. <br>
If you are Matt Roszak and you want this site obliterated harder than my coffee supply after Epic Godcat, email me at qdesmond@proton.me and it shall be done. <br>

<!--
Here's a list of all save file parameters and how many are implemented. I don't know how many I'll actually add support for, but it's a good fake-checklist of sorts.
[D] - Done
[P] - Partially done
[N] - Up next
[S] - Simple to implement
[T] - Tricky to implement
[U] - Unbelievably difficult to implement (these'll probably take a while)
[?] - Unsure of what this entails, so can't tell how difficult it is

misc - [P], missing summon power (Which doesn't really matter, since the game ignores the value and re-calculates it on load regardless)
rareItemCosts - [S], stores # of rare items bought instead of costs
eventData - [U]
spellLevels - [T]
spellOwnage - [T]
area - [S]
altWeather - [P], needs icon
seed - [S]
altEquipStats - [P], needs icon
textFlags - [U]
altEquipLocations - [P], needs icon
altFoes - [P], needs icon
alwaysScaleFoes - [P], needs icon
cheats - [T], presumable also includes challenges
consoles - [S]
alwaysGiveEXP - [S]
customizations - [?]
books - [T], why are there 31 of these? there aren't *that* many at the library...
threePlayerMode - [P], needs icon
limitsList - [?], array that fills up to 20 with only true????
battlesWithCounter - [S]
twoPlayerMode - [P], needs icon
markerData - [?], requires a good chunk of testing
onePlayerMode - [P], needs icon
playerData - [P], missing skills, limits, and dead/not dead (if it still even functions in the game)
equippedSummons - [?], could be mildly tricky or hellish
equipSets - [T], just lists of equip ids for the equipment presets
blocks - [?], no idea what this even does
battlesWithResistance - [S]
ownedSummons - [T], mainly just involves figuring out summon ids 
equipLevels - [T]
mapData - [U], dear god those array sizes
summonInfo - [T], summon name, nickname, unknown number variable (amount captured??)
gameStats - [S], a bunch of unlabelled numbers but that's what ffdec is for
party - [S]
equipOwnage - [N]
shipping - [?], only 6 numbers around the same range? what it mean?
recentSummons - [?]
medals - [S], uses true/null instead of true/false for some reason
scans - [T], array of magic strings instead of foe ids like summons use
npcFlags - [U]
questNo - [S], new game/new game+, so on and so forth
itemQuantities - [T]
cardQuantities - [S], says "quantities" but cards are unique so they're all just 0 or 1
-->

</body>
</html>