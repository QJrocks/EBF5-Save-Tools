<!doctype html>
<html>
<head>
	<title>EBF5 Save File Tools</title>
	
	<style> 
		html *
		{
		   font-size: 1em;
		   color: #000;
		   font-family: Verdana;
		   background-color: #7AF;
		}
		
		input[type=text] {
			border-width: 2px;
			border-style: solid;
			border-color: #FFF;
		}
		
		@font-face {
			font-family: Tahoma;
			src: url("tahomabd.ttf");
		}
		
		.numberFont {
			border:none !important;
			background:rgba(0,0,0,0); 
			font-size: 1.25em; 
			-webkit-text-stroke: 0.08rem white; 
			font-family: Tahoma, sans-serif !important;
		}
		
		.textVCenter {
			position: relative;
			bottom: 0.5em;
		}
		
		details {
			padding: 5px;
			border-width: 2px;
			border-style: solid;
			border-color: #37A;
			border-radius: 5px;
		}
		
		.note
		{
			font-size: 0.8em;
			color: #F00;
		}
		
		.clickButton {
		  background-color: #7F9CCB;
		  padding: 5px 10px;
		  border-radius: 5px;
		  border: 1px ridge black;
		  font-size: 0.8rem;
		  height: auto;
		}

		.clickButton:hover {
		  background-color: #2D5BA3;
		  color: white;
		}

		.clickButton:active {
		  background-color: #0D3F8F;
		  color: white;
		}
		
		.partyArrangeButton {
		  background-color: #7F9CCB;
		  padding: 5px 10px;
		  border-radius: 5px;
		  border: 1px ridge black;
		  font-size: 0.8rem;
		  height: auto;
		}

		.partyArrangeButton:hover {
		  background-color: #2D5BA3;
		  color: white;
		}

		.partyArrangeButton:active {
		  background-color: #0D3F8F;
		  color: white;
		}
		
		.limitBar {
			width: 55%;
			accent-color: red;
		}
		
		.dropdownTable {
			position:relative; 
			top: 20px; 
			z-index: 100;
		}
		
		.equip {
			--icon-size: 60px;
			background: url(equip_spritesheet.png);
			display: block;
			width: var(--icon-size);
			height: var(--icon-size);
			background-size: 2100%;
			/* 1680px image / 80px tiles = 21, so scale up by 21x */
			position:relative;
		}
		
		.craftitem {
			--icon-size: 60px;
			background: url(craftitems_spritesheet.png);
			display: block;
			width: var(--icon-size);
			height: var(--icon-size);
			background-size: 1000%;
			/* 800px image / 80px tiles = 10, so scale up by 10x */
			position:relative;
		}
		
		.consumableitem {
			--icon-size: 60px;
			background: url(consumableitems_spritesheet.png);
			display: block;
			width: var(--icon-size);
			height: var(--icon-size);
			background-size: 1100%;
			/* 880px image / 80px tiles = 11, so scale up by 11x */
			position:relative;
		}
		
		.keyitem {
			--icon-size: 60px;
			background: url(keyitems_spritesheet.png);
			display: block;
			width: var(--icon-size);
			height: var(--icon-size);
			background-size: 1000%;
			/* 4000px image / 400px tiles = 10, so scale up by 10x */
			position:relative;
		}
		
		
		.playericon {
			--icon-size: 60px;
			background: url(players.png);
			display: block;
			width: var(--icon-size);
			height: calc(var(--icon-size) * 1.0925);
			/*player image resolution is not perfectly square so we gotta throw in the messed up multipliers*/
			background-size: 500%;
			/* 2000px image / 400px tiles = 5, so scale up by 5x */
			position:relative;
		}
		
		.miscicon {
			--icon-size: 60px;
			background: url(misc_icons.png);
			display: block;
			width: var(--icon-size);
			height: var(--icon-size);
			background-size: 400%;
			/* 2000px image / 400px tiles = 4, so scale up by 4x */
			position:relative;
		}
		.tiny {
			--icon-size: 20px;
		}
		
		.small {
			--icon-size: 30px;
		}
		
		.medium {
			--icon-size: 40px;
		}
		
		.large {
			--icon-size: 80px;
		}
		
		.absurdly_gigantic {
			--icon-size: 160px;
		}
			
		.iconPosBR {
			position: absolute; 
			bottom: 0;
			right: 0;	
			text-align: right;
		}
		
		.iconPosBL {
			position: absolute; 
			bottom: 0;
		}
		
		.hide {
			display: none;
		}
		
		.darkened {
			-webkit-filter:brightness(25%);
			-moz-filter:brightness(25%);
			filter: url(#brightness); /* required for FF */
			filter:brightness(25%);
		}
		</style>
		
	<link rel="stylesheet" href="equip_styles.css"/>
	<link rel="stylesheet" href="craftitem_styles.css"/>
	<link rel="stylesheet" href="consumableitem_styles.css"/>
	<link rel="stylesheet" href="keyitem_styles.css"/>
	<link rel="stylesheet" href="playericon_styles.css"/>
	<link rel="stylesheet" href="miscicon_styles.css"/>
	
	<script src = "localization.js"></script>
	
	<script src = "fullEquipList.js"></script>
	<script src = "fullItemList.js"></script>
	
	<script src = "defaultFile.js"></script>
	
	<script>
		window.onload = function() {
			preparePlayerEquipTable();
			prepareCraftitemTable();
			prepareConsumableitemTable();
			prepareKeyitemTable();
		}
		
		function preparePlayerEquipTable() {
			const names = new Array('matt', 'natz', 'lance', 'anna', 'nolegs')
			const weaponTypes = new Array('sword', 'staff', 'gun', 'bow', 'toy')
			const armorTypes = new Array('m', 'f', 'm', 'f', 'm')
			const equipTypes = new Array("Weapon", "Hat", "Armor", "Flair1", "Flair2", "Flair3")
			let outputElement = document.getElementById("playerEquipTable")
			outputElement.innerHTML = ""
			for(let i = 0; i < names.length; i++) {
				let _outputCell = document.createElement("td")
				let _outputTable = document.createElement("table")
				for(let y = 0; y < 2; y++) {
					let _outputRow = document.createElement("tr")
					for(let x = 0; x < 3; x++) {
						let equipString = equipTypes[y * 3 + x].toLowerCase()
						if(y === 0) {
							if(x === 0) {
								equipString = weaponTypes[i]
							}
							if(x === 1 || x === 2) {
								equipString += armorTypes[i]
							}
						}
						let _equipCell = document.createElement("td")
						let _equipSpan = document.createElement("span")
						_equipSpan.setAttribute("id", names[i] + equipTypes[y * 3 + x])
						_equipSpan.setAttribute("onclick", "openEquipDropdown(this, '" + names[i] + "', '" + equipString + "')")
						_equipCell.appendChild(_equipSpan)
						//example completed line: <td><span id="mattWeapon" onclick="openEquipDropdown(this, 'Matt', 'sword');"/></td>		
						_outputRow.appendChild(_equipCell)
					}
					_outputTable.appendChild(_outputRow)
				}
				_outputCell.appendChild(_outputTable)
				outputElement.appendChild(_outputCell)
			}
			/*Full block example:
			<td><table>
				<tr>
					<td><span id="mattWeapon" onclick="openEquipDropdown(this, 'Matt', 'sword');"/></td>
					<td><span id="mattHat" onclick="openEquipDropdown(this, 'Matt', 'hatm');"/></td>
					<td><span id="mattArmor" onclick="openEquipDropdown(this, 'Matt', 'armorm');"/></td>
				</tr>
				<tr>
					<td><span id="mattFlair1" onclick="openEquipDropdown(this, 'Matt', 'flair1');"/></td>
					<td><span id="mattFlair2" onclick="openEquipDropdown(this, 'Matt', 'flair2');"/></td>
					<td><span id="mattFlair3" onclick="openEquipDropdown(this, 'Matt', 'flair3');"/></td>
				</tr>
			</table></td>*/
		}

		function prepareCraftitemTable() {
			let cTable = document.getElementById("craftitemTable");
			cTable.innerHTML = ""
			for(let y = 0; y < 6; y++) {
				let _outputRow = document.createElement("tr")
				for(let x = 0; x < 10; x++) {
					let _outputCell = document.createElement("td")
					
					let craftitemID = (y * 10) + x
					let itemID = craftitemID + 48
					let _itemSpan = document.createElement("span")
					_itemSpan.setAttribute("title", localization['english'][craftItems[craftitemID]])
					_itemSpan.className = "craftitem craftitem" + craftitemID
					
					let _itemCount = document.createElement("input")
					_itemCount.setAttribute("type", "text")
					_itemCount.setAttribute("id", "craftitemVal" + craftitemID)
					_itemCount.setAttribute("size", "3")
					_itemCount.setAttribute("onchange", "fileObj.itemQuantities[" + (itemID) + "] = Number(this.value)")
					_itemCount.className = "numberFont iconPosBR"
					//example completed line: <td><span class="craftitem craftitem0" title="Snowball">
					//<input type='text' class = 'numberFont iconPosBR' id = 'craftitemVal0' size='3' onchange='fileObject.itemQuantities[48] = Number(this.value)' />
					//</span></td>
					
					_itemSpan.appendChild(_itemCount)
					_outputCell.appendChild(_itemSpan)
					
					_outputRow.appendChild(_outputCell)
				}
				cTable.appendChild(_outputRow)
			}
		}

		function prepareConsumableitemTable() {
			let cTable = document.getElementById("consumableitemTable");
			cTable.innerHTML = ""
			for(let y = 0; y < 3; y++) {
				let _outputRow = document.createElement("tr")
				for(let x = 0; x < 8; x++) {
					let _outputCell = document.createElement("td")
					
					let foodID = (y * 8) + x
					let consumableID = foodID
					let itemID = foodID
					let _itemSpan = document.createElement("span")
					_itemSpan.setAttribute("title", localization['english'][foodItems[foodID]])
					_itemSpan.className = "consumableitem consumableitem" + consumableID
					
					let _itemCount = document.createElement("input")
					_itemCount.setAttribute("type", "text")
					_itemCount.setAttribute("id", "fooditemVal" + foodID)
					_itemCount.setAttribute("size", "3")
					_itemCount.setAttribute("onchange", "fileObj.itemQuantities[" + (itemID) + "] = Number(this.value)")
					_itemCount.className = "numberFont iconPosBR"
					//example completed line: <td><span class="consumableitem consumableitem0" title="Pumpkin">
					//<input type='text' class = 'numberFont iconPosBR' id = 'fooditemVal0' size='3' onchange='fileObject.itemQuantities[0] = Number(this.value)' />
					//</span></td>
					
					_itemSpan.appendChild(_itemCount)
					_outputCell.appendChild(_itemSpan)
					
					_outputRow.appendChild(_outputCell)
				}
				cTable.appendChild(_outputRow)
			}
			for(let y = 0; y < 5; y++) {
				let _outputRow = document.createElement("tr")
				for(let x = 0; x < 4; x++) {
					let _outputCell = document.createElement("td")
					
					let steroidID = (y * 4) + x
					let consumableID = steroidID + 24
					let itemID = steroidID + 28
					let _itemSpan = document.createElement("span")
					_itemSpan.setAttribute("title", localization['english'][steroidItems[steroidID]])
					_itemSpan.className = "consumableitem consumableitem" + consumableID
					
					let _itemCount = document.createElement("input")
					_itemCount.setAttribute("type", "text")
					_itemCount.setAttribute("id", "steroiditemVal" + steroidID)
					_itemCount.setAttribute("size", "3")
					_itemCount.setAttribute("onchange", "fileObj.itemQuantities[" + (itemID) + "] = Number(this.value)")
					_itemCount.className = "numberFont iconPosBR"
					
					_itemSpan.appendChild(_itemCount)
					_outputCell.appendChild(_itemSpan)
					
					_outputRow.appendChild(_outputCell)
				}
				cTable.appendChild(_outputRow)
			}
		}
		
		function prepareKeyitemTable() {
			let cTable = document.getElementById("keyitemTable");
			cTable.innerHTML = ""
			for(let y = 0; y < 6; y++) {
				let _outputRow = document.createElement("tr")
				for(let x = 0; x < 11; x++) {
					let _outputCell = document.createElement("td")
					
					let keyID = (y * 11) + x
					let itemID = keyID + 108
					let _itemSpan = document.createElement("span")
					_itemSpan.setAttribute("title", localization['english'][keyItems[keyID]])
					_itemSpan.className = "keyitem keyitem" + keyID
					
					let _itemCount = document.createElement("input")
					_itemCount.setAttribute("type", "text")
					_itemCount.setAttribute("id", "keyitemVal" + keyID)
					_itemCount.setAttribute("size", "3")
					_itemCount.setAttribute("onchange", "fileObj.itemQuantities[" + (itemID) + "] = Number(this.value)")
					_itemCount.className = "numberFont iconPosBR"
					//example completed line: <td><span class="keyitem keyitem0" title="Scouter">
					//<input type='text' class = 'numberFont iconPosBR' id = 'keyitemVal0' size='3' onchange='fileObject.itemQuantities[108] = Number(this.value)' />
					//</span></td>
					
					_itemSpan.appendChild(_itemCount)
					_outputCell.appendChild(_itemSpan)
					
					_outputRow.appendChild(_outputCell)
				}
				cTable.appendChild(_outputRow)
			}
		}
	
		var inputFileName
		var fileString
		var fileObj
		
		var dropdownOpener;
		var dropdownPlayer;
		var dropdownEquipSlot;
		
		function openEquipDropdown(parentElement, player, equipType) {
			//An attempt to make calling this function a little less magic-number-y
			const players = new Array("matt", "natz", "lance", "anna", "nolegs");
			//Which equipment takes up which slot (for example, all weapons are in the top-left)
			// 0 1 2
			// 3 4 5
			const equipSlots = {
				"sword": 0,
				"staff": 0,
				"gun": 0,
				"bow": 0,
				"toy": 0,
				"armorm": 1,
				"armorf":1,
				"hatm": 2,
				"hatf": 2,
				"flair1": 3,
				"flair2": 4,
				"flair3": 5
			}
			
			dropdownOpener = parentElement;
			if(player !== null) { //bit of jank code here for changeDropdownTab, may refactor this into its own variable or something to make it cleaner
				dropdownPlayer = players.indexOf(player);
				dropdownEquipSlot = equipSlots[equipType];
			}
			
			if(equipType === "flair1" || equipType === "flair2" || equipType === "flair3") {
				equipType = "flair";
			}
			
			//list of equipment tabs
			const equipTabs = new Array("sword", "staff", "gun", "bow", "toy", "hatm", "armorm", "hatf", "armorf", "flair");
			
			//darken all tabs
			let allTabs = document.getElementsByClassName("dropdownTab");
			for(const tab of allTabs) {
				tab.classList.add("darkened");
			}
			//un-darken selected tab
			let selectedTabIndex = equipTabs.indexOf(equipType);
			allTabs[selectedTabIndex].classList.remove("darkened");
			
			let dropdownContainer = document.getElementById("dropdownBackground");
			let dropdownElement = document.getElementById("dropdownTable");
			dropdownContainer.classList.remove("hide");
			
			dropdownElement.innerHTML = generateEquipTableHTML(equipType, "dropdownTable", "'" + "setEquipDropdown(this.className.split(&quot; &quot;)[1])" + "'");
		}
		
		function generateEquipTableHTML(equipType, tableClassString, onclickString) {
			let equipAmount = 21;
			let equipsPerRow = 7;
			if(equipType === "flair") {
				equipAmount = 55;
				equipsPerRow = 11;
			}
			let equipRows = equipAmount / equipsPerRow;
			
			let entireTableString = "<table class='" + tableClassString + "'>";
			for(let x = 0; x < equipRows; x++) {
				entireTableString += "<tr>";
				for(let y = 0; y < equipsPerRow; y++) {
					//Since this mess is littered with all sort of string-manipulating nonsense, here's what a standard output for these lines might look like:
					//<span class="equip staff15" onclick="setEquipDropdown(this.className.split(&quot; &quot;)[1])"></span>
					let equipID = equipType + (x * equipsPerRow + y);
					let classString = "'" + "equip " + equipID + "'";
					//Since we're using single-quotes to wrap the string, we need to replace apostrophes in equipment names with &apos;
					let hoverString = "'" + localization["english"][equipID].replace("'", "&apos;") + "'";
					entireTableString += "<td><span class=" + classString + " onclick=" + onclickString + " title=" + hoverString + "></td>";
				}
				entireTableString +=  "</tr>";
			}
			entireTableString +=  "</table>";
			return entireTableString;
		}
		
		var changeDropdownWarning = true;
		function changeDropdownTab(event, val) { //takes in an additional event variable to prevent the dropdown from closing
			event.stopPropagation();
			openEquipDropdown(dropdownOpener, null, val);
			if(changeDropdownWarning === true) {
				window.alert("WARNING! While assigning equipment to the wrong slot generally works, certain combinations can result in the game or your save file being softlocked. Proceed with caution!")
				changeDropdownWarning = false;
			}
		}
		
		function setEquipDropdown(val) {
			dropdownOpener.className = "equip " + val;
			dropdownOpener.title = localization["english"][val];
			fileObj.playerData[dropdownPlayer][3][dropdownEquipSlot] = allEquips.indexOf(val);
		}
		
		var overlevelEquipWarning = true;
		var underlevelEquipWarning = true;
		function setEquipLevel(equipIndex, level) {
			let equipLevelMax = 5;
			if(equipIndex <= 36 || equipIndex >= 227) { //equip is flair
				equipLevelMax = 3;
			}
			
			if(overlevelEquipWarning === true) {
				if(level > equipLevelMax) {
					window.alert("WARNING! While setting an equipment to a higher-than-intended level can have benefits (such as a higher chance of equip effects activating), doing so will have strange effects on both the in-game equip menu and on the equipped character's stats and resistances. Proceed with caution!");
					overlevelEquipWarning = false;
				}
			}
			if(underlevelEquipWarning === true) {
				if(level < 0) {
					window.alert("WARNING! There is no benefit to setting equip levels to a negative number. At best, the equip will have no effect, making it have dead weight. At worst, the equip will tank your stats to effectively nothing, making you die to a slight breeze. It also messes up the equip menu. Please reconsider.");
					underlevelEquipWarning = false;
				}
			}
			fileObj.equipLevels[equipIndex] = level;
		}
		
		function closeEquipDropdown() {
			document.getElementById("dropdownBackground").classList.add('hide');
			document.getElementById("dropdownTable").innerHTML = "";
			var dropdowns = document.getElementsByClassName("equipDropdown");
			for (let element of dropdowns) {
				element.classList.add('hide');
			}
		}
		
		//this one is for the obtained/levels part, not the equip selection dropdown
		function changeEquipTab(equipType) {			
			//list of equipment tabs
			const equipTabs = new Array("sword", "staff", "gun", "bow", "toy", "hatm", "armorm", "hatf", "armorf", "flair");
			
			//darken all tabs
			let allTabs = document.getElementsByClassName("equipTab");
			for(const tab of allTabs) {
				tab.classList.add("darkened");
			}
			//un-darken selected tab
			let selectedTabIndex = equipTabs.indexOf(equipType);
			allTabs[selectedTabIndex].classList.remove("darkened");
			
			let equipTabTable = document.getElementById("equipTabTable");
			equipTabTable.innerHTML = generateEquipTableHTML(equipType, "", "'" + "toggleEquipOwned(this)" + "'");
			
			equipInnerTable = equipTabTable.children[0]
			for (let row of equipInnerTable.rows) 
			{
				for (let cell of row.cells) {
					let cellEq = cell.children[0]
					let equipName = cellEq.classList[1]
					if(fileObj.equipOwnage[allEquips.indexOf(equipName)] === false) {
						cellEq.classList.add("darkened")
					}	
					cellEq.innerHTML = "<span style='padding: 1px' class='numberFont iconPosBL'>Lvl</span><input style='z-index:10' class='numberFont iconPosBR' type='text' id='tempEquipID_" + equipName + "' size='2' onchange='setEquipLevel(" + allEquips.indexOf(equipName) + ", Number(this.value))' onclick='event.stopPropagation()' value='" + fileObj.equipLevels[allEquips.indexOf(equipName)] + "' />"
				}
			}
		}
		
		function toggleEquipOwned(self) {
			let equipActive = !fileObj.equipOwnage[allEquips.indexOf(self.classList[1])]
			fileObj.equipOwnage[allEquips.indexOf(self.classList[1])] = equipActive
			
			if(equipActive) {
				self.classList.remove("darkened");
			}
			else {
				self.classList.add("darkened");
			}
			
			calculateRandEquips()
		}
		
		function updatePlayerParty(active, playerID) {
			if(active) {
				if(!fileObj.party.includes(playerID)) {
					fileObj.party.push(playerID);
				}
			}
			else {
				if(fileObj.party.includes(playerID)) {
					fileObj.party.splice(fileObj.party.indexOf(playerID), 1);
				}
			}
			rebuildPartyDisplay();
		}
		
		function rebuildPartyDisplay() {
			let partyOrder = document.getElementById("partyOrder")
			partyOrder.innerHTML = "";
			let playerIndex = 0;
			for(let player of fileObj.party) {
				let playerStr = "<td>"
				playerStr += "<div class='playericon large player" + player + "'>"			
				if(playerIndex !== 0) {
					playerStr += "<input type='button' class='partyArrangeButton iconPosBL' value='<-' onclick='swapPartyIndex(" + playerIndex + ", " + (playerIndex - 1) + ")'></input>"
				}
				if(playerIndex < fileObj.party.length - 1) {
					playerStr += "<input type='button' class='partyArrangeButton iconPosBR' value='->' onclick='swapPartyIndex(" + playerIndex + ", " + (playerIndex + 1) + ")'></input>"
				}
				playerStr += "</div>"
				playerStr += "</td>"
				playerIndex++;
				partyOrder.innerHTML += playerStr
			}
			for(let x = 0; x < 5 - fileObj.party.length; x++) {
				partyOrder.innerHTML += "<td><div class='equip large equipEmpty'></div></td>"
			}
			
			if(fileObj.party.length == 0) {
				document.getElementById('EmptyPartyNote').style = 'display:inline'			
			}
			else {
				document.getElementById('EmptyPartyNote').style = 'display:none'		
			}
		}
		
		function swapPartyIndex(a, b) {
			var temp = fileObj.party[a]
			fileObj.party[a] = fileObj.party[b]
			fileObj.party[b] = temp
			rebuildPartyDisplay()
		}
	
		//reads in the file and base64-decodes it into a usable string.
		function readFile(input) {
			let file = input.files[0]; 
			let fileReader = new FileReader(); 
			fileReader.readAsText(file); 
			fileReader.onload = function() {
				inputFileName = file.name
				fileString = atob(fileReader.result)
				loadFile();
			}; 
			fileReader.onerror = function() {
				alert(fileReader.error);
			}; 
		}	
		
		function loadDefaultFile() {
			inputFileName = "default.meow"
			fileString = atob(defaultFileString)
			loadFile();
		}

		function loadFile() {
			document.getElementById("everything").style = "display:block"
			fileObj = JSON.parse(fileString)
			
			document.getElementById("currentSP").value = fileObj.misc[0]
			document.getElementById("maxSP").value = fileObj.misc[1]
			document.getElementById("gold").value = fileObj.misc[2]
			document.getElementById("summonPower").value = fileObj.misc[3]
			
			//load data for the players
			let charNames = new Array("matt", "natz", "lance", "anna", "nolegs");
			
			for(let x = 0; x < 5; x++) {
				let name = charNames[x]
				document.getElementById(name+"LVL").value = fileObj.playerData[x][0];
				document.getElementById(name+"EXP").value = fileObj.playerData[x][5];
				document.getElementById(name+"AP").value = fileObj.playerData[x][6];
				document.getElementById(name+"Limit").value = fileObj.playerData[x][2];
			
				//Steroids are matched to multiple stats, but the stat multipliers are independent to each stat.
				//To convert multipliers to steroid amounts, I opt to use the Attack/Magic Attack/Accuracy stats instead of the Defense/Magic Defense/Evade ones.
				//They should be the same, so it shouldn't change anything, but it's good to note.		
				document.getElementById(name+"ADstr").value = (fileObj.playerData[x][1][1] - 100) / 2;
				document.getElementById(name+"MMstr").value = (fileObj.playerData[x][1][2] - 100) / 2;
				document.getElementById(name+"EAstr").value = (fileObj.playerData[x][1][3] - 100);
				document.getElementById(name+"HPstr").value = (fileObj.playerData[x][1][0] - 100) / 2;
				
				//Set up both classes for equip displays and titles for hovertext
				document.getElementById(name+"Weapon").className = "equip " + allEquips[fileObj.playerData[x][3][0]];
				document.getElementById(name+"Weapon").title = localization["english"][allEquips[fileObj.playerData[x][3][0]]];
				document.getElementById(name+"Hat").className = "equip " + allEquips[fileObj.playerData[x][3][2]];
				document.getElementById(name+"Hat").title = localization["english"][allEquips[fileObj.playerData[x][3][2]]];
				document.getElementById(name+"Armor").className = "equip " + allEquips[fileObj.playerData[x][3][1]];
				document.getElementById(name+"Armor").title = localization["english"][allEquips[fileObj.playerData[x][3][1]]];
				document.getElementById(name+"Flair1").className = "equip " + allEquips[fileObj.playerData[x][3][3]];
				document.getElementById(name+"Flair1").title = localization["english"][allEquips[fileObj.playerData[x][3][3]]];
				document.getElementById(name+"Flair2").className = "equip " + allEquips[fileObj.playerData[x][3][4]];
				document.getElementById(name+"Flair2").title = localization["english"][allEquips[fileObj.playerData[x][3][4]]];
				document.getElementById(name+"Flair3").className = "equip " + allEquips[fileObj.playerData[x][3][5]];
				document.getElementById(name+"Flair3").title = localization["english"][allEquips[fileObj.playerData[x][3][5]]];
				
				document.getElementById(name+"InParty").checked = fileObj.party.includes(x + 1);
			}
			rebuildPartyDisplay();
			updatePlayerStats();
			
			//now set up the custom game flags since they're easy
			document.getElementById("foeRemix").checked = fileObj["altFoes"];
			document.getElementById("weatherRemix").checked = fileObj["altWeather"];
			document.getElementById("equipRemix").checked = fileObj["altEquipStats"];
			document.getElementById("randomEquips").checked = fileObj["altEquipLocations"];
			document.getElementById("randomEquipsSeed").value = fileObj["seed"];
			document.getElementById("scalingFoes").checked = fileObj["alwaysScaleFoes"];
			document.getElementById("3Pbattles").checked = fileObj["threePlayerMode"];
			document.getElementById("2Pbattles").checked = fileObj["twoPlayerMode"];
			document.getElementById("1Pbattles").checked = fileObj["onePlayerMode"];
			document.getElementById("limitLimitedPlayers").checked = false;
			
			
			//item quantities wooo
			for(let x = 0; x < 24; x++) {
				//food			
				let foodID = x;
				document.getElementById("fooditemVal" + foodID).value = fileObj.itemQuantities[x];
			}
			for(let x = 28; x < 48; x++) {
				//steroids			
				let steroidID = x - 28;
				document.getElementById("steroiditemVal" + steroidID).value = fileObj.itemQuantities[x];
			}
			for(let x = 48; x < 108; x++) {
				//craft items		
				let craftID = x - 48;
				document.getElementById("craftitemVal" + craftID).value = fileObj.itemQuantities[x];
			}
			for(let x = 108; x < 174; x++) {
				//key items			
				let keyID = x - 108;
				document.getElementById("keyitemVal" + keyID).value = fileObj.itemQuantities[x];
			}
			
			changeEquipTab('sword')
			
			calculateRandEquips()
		}
		
		function saveFile() {
			if(fileObj === undefined) {
				window.alert("Load a file, first!");
				return;
			}
			
			//copy duplicated item quantities (throwables), just to be safe
			fileObj.itemQuantities[24] = fileObj.itemQuantities[48];
			fileObj.itemQuantities[25] = fileObj.itemQuantities[50];
			fileObj.itemQuantities[26] = fileObj.itemQuantities[55];
			fileObj.itemQuantities[27] = fileObj.itemQuantities[60];
		
			//Append "_edited" at the end of the filename to help avoid file corruption (original file is intact)
			let filename = inputFileName.split('.')[0] + "_edited.meow";
			let encoded = btoa(JSON.stringify(fileObj));
			let text = ""
			//Adobe Flash's Base64 encoding default is slightly different from JavaScript's, in that every 76 characters a newline is added.
			//See https://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/utils/Base64Encoder.html for more details.
			//In any case, it's important to replicate that behavior here for maximum compatibility.
			for(let x = 0; x < encoded.length; x += 76) {
				text += encoded.substring(x, x + 76);
				text += String.fromCharCode(10);
			}
			
			if(text.charCodeAt(text.length - 1) == 10) {
				text = text.substring(0, text.length - 1);
			}
			
			var pom = document.createElement('a');
			pom.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));
			pom.setAttribute('download', filename);

			if (document.createEvent) {
				var event = document.createEvent('MouseEvents');
				event.initEvent('click', true, true);
				pom.dispatchEvent(event);
			}
			else {
				pom.click();
			}
		}
		
		function updateLimitedPlayerBattles() {
			fileObj.threePlayerMode = document.getElementById('3Pbattles').checked;
			fileObj.twoPlayerMode = document.getElementById('2Pbattles').checked;
			fileObj.onePlayerMode = document.getElementById('1Pbattles').checked;
		}
		
		function setLimitedPlayerInput(limited) {
			if(limited) {
				document.getElementById('3Pbattles').type = 'checkbox';
				document.getElementById('2Pbattles').type = 'checkbox';
				document.getElementById('1Pbattles').type = 'checkbox';
			}
			else {
				document.getElementById('3Pbattles').type = 'radio';
				document.getElementById('2Pbattles').type = 'radio';
				document.getElementById('1Pbattles').type = 'radio';
			}
		}
		
		function updatePlayerStats() {
			
		}
		
		class EquipSet {
			size = 0
			//Internally, the game uses string matching for equipment (for example, the Flame Badge's internal ID is "firebadge")
			//I'm using a more generic string system just for ease of use (as in, "flair00") to have less copy-pasting from game files
			equipIDs = []
			equipSelected = []
			seedString = ""

			constructor(arr, s) {
				this.size = arr.length;
				this.seedString = s

				for (let x = 0; x < this.size; x++) {
					this.equipSelected.push(false);
					this.equipIDs.push(arr[x])
				}
			}

			equipsAvailable() {
				for (let x = 0; x < this.size; x++) {
					if (this.equipSelected[x] === false) {
						return true;
					}
				}
				return false;
			}
			
			getNextEquip() {
				let randSelect = 0;
				let seed = fileObj.seed + this.seedString.charCodeAt(0) + this.seedString.charCodeAt(1);
				do
				{
					randSelect = (randSelect += seed + 1) % this.size;
					seed = Math.floor(seed / 1.1);
					if (this.equipSelected[randSelect] === false) {
						return this.equipIDs[randSelect]
					}
				} while (this.equipsAvailable() === true);
				return "invalid";
			}
			
			acquireEquip() {
				let equipID = this.getNextEquip();
				let equipIndex = this.equipIDs.indexOf(equipID)
				this.equipSelected[equipIndex] = true;
				return equipID
			}
			
			acquireRemaining() {
				let equipArr = new Array()
				while(this.equipsAvailable() === true) {
					equipArr.push(this.acquireEquip())
				}
				return equipArr
			}
			
			swapEquips(prevEquip) {
				let prevID = this.equipIDs.indexOf(prevEquip)
				let newEquip = this.acquireEquip()
				this.equipSelected[prevID] = false;
				return newEquip
			}
			
			markEquipped(currentEquip) {
				let equipIndex = this.equipIDs.indexOf(currentEquip)
				this.equipSelected[equipIndex] = true;
			}
		};

		function printEquips(equipArray, resultElement, rowCount, columnCount, iconClass) {
			let resultTable = document.createElement("table")
			for(let i = 0; i < rowCount; i++) {
				let resultRow = document.createElement("tr")
				for(let j = 0; j < columnCount; j++) {
					let x = (i * columnCount) + j
					if(x < equipArray.length) {
						let hoverString = localization["english"][equipArray[x]];
						let resultCell = document.createElement("td")
						let resultSpan = document.createElement("span")
						resultSpan.className = "medium equip " + equipArray[x]
						resultSpan.setAttribute("title", hoverString)	
						if(iconClass != null) {
							let resultIcon = document.createElement("span")
							resultIcon.className = iconClass + " iconPosBL"
							resultSpan.appendChild(resultIcon)
						}		
						resultCell.appendChild(resultSpan)
						resultRow.appendChild(resultCell)
					}
				}
				resultTable.appendChild(resultRow)
			}
			resultElement.innerHTML = "";
			resultElement.appendChild(resultTable)
		}

		function calculateRandEquips() {
			let swords = new EquipSet(allSwords, 'wo');
			let staffs = new EquipSet(allStaffs, 'ta');
			let guns = new EquipSet(allGuns, 'un');
			let bows = new EquipSet(allBows, 'ow');
			let toys = new EquipSet(allToys, 'oy');
			let hatsM = new EquipSet(allHatsM, 'at');
			let armorM = new EquipSet(allArmorM, 'rm');
			let hatsF = new EquipSet(allHatsF, 'at');
			let armorF = new EquipSet(allArmorF, 'rm');
			let flairs = new EquipSet(allFlairs, 'la');
			
			function getEquipSet(equipString) {
				if(equipString.includes("sword")) return swords;
				if(equipString.includes("staff")) return staffs;
				if(equipString.includes("gun")) return guns;
				if(equipString.includes("bow")) return bows;
				if(equipString.includes("toy")) return toys;
				if(equipString.includes("hatm")) return hatsM;
				if(equipString.includes("armorm")) return armorM;
				if(equipString.includes("hatf")) return hatsF;
				if(equipString.includes("armorf")) return armorF;
				if(equipString.includes("flair")) return flairs;
				return null;
			}
			
			let seed = fileObj.seed
			
			let shopItems = new Array();
			shopItems.push(hatsM.acquireEquip(), hatsF.acquireEquip(), armorM.acquireEquip(), armorF.acquireEquip(), flairs.acquireEquip(), swords.acquireEquip(), staffs.acquireEquip(), guns.acquireEquip(), bows.acquireEquip(), toys.acquireEquip(), hatsM.acquireEquip(), hatsF.acquireEquip(), hatsM.acquireEquip(), hatsF.acquireEquip(), flairs.acquireEquip(), swords.acquireEquip(), staffs.acquireEquip(), bows.acquireEquip(), toys.acquireEquip(), flairs.acquireEquip(), armorM.acquireEquip(), armorF.acquireEquip())
			
			let equippedEquips = new Array();
			let obtainedEquips = new Array();
			
			for(let p = 0; p < 5; p++) {
				for(let x = 0; x < 6; x++) {
					let eq = allEquips[fileObj.playerData[p][3][x]];
					getEquipSet(eq)?.markEquipped(eq)
					equippedEquips.push(eq)
				}
			}
			
			for(let x = 0; x < fileObj.equipOwnage.length; x++) {
				if(fileObj.equipOwnage[x] === true) {
					let eq = allEquips[x]
					getEquipSet(eq)?.markEquipped(eq)
					obtainedEquips.push(eq)
				}
			}
			
			let swordList = swords.acquireRemaining()
			let staffList = staffs.acquireRemaining()
			let gunList = guns.acquireRemaining()
			let bowList = bows.acquireRemaining()
			let toyList = toys.acquireRemaining()
			let hatsMList = hatsM.acquireRemaining()
			let armorMList = armorM.acquireRemaining()
			let hatsFList = hatsF.acquireRemaining()
			let armorFList = armorF.acquireRemaining()
			let flairList = flairs.acquireRemaining()
			
			//22 total shop equips, in rows of 6 (last 2 slots of bottom row empty)
			printEquips(shopItems, document.getElementById("randE_shopItems"), 4, 6, "tiny miscicon misc1");
			
			printEquips(swordList, document.getElementById("randE_swordList"), 1, 99);
			printEquips(staffList, document.getElementById("randE_staffList"), 1, 99);
			printEquips(gunList, document.getElementById("randE_gunList"), 1, 99);
			printEquips(bowList, document.getElementById("randE_bowList"), 1, 99);
			printEquips(toyList, document.getElementById("randE_toyList"), 1, 99);
			printEquips(hatsMList, document.getElementById("randE_hatMList"), 1, 99);
			printEquips(armorMList, document.getElementById("randE_armorMList"), 1, 99);
			printEquips(hatsFList, document.getElementById("randE_hatFList"), 1, 99);
			printEquips(armorFList, document.getElementById("randE_armorFList"), 1, 99);
			printEquips(flairList, document.getElementById("randE_flairList"), 1, 99);
		}
	</script>
</head>

<body>
<!-- Before any of the actual webpage content, here's the HTML for the equip dropdown for selecting equipment.
It has a screen-wide div which closes the dropdown on clicking. Inside the div is where the equip table itself is generated from the openEquipDropdown method.
It's all hidden by default, of course. -->
	<div class = "hide" id = "dropdownBackground" style="position: fixed;
		left: 0;
		top: 0;
		right: 0;
		bottom: 0;
		background: rgba(0, 0, 0, 0.5);
		z-index: 50;" onclick = "closeEquipDropdown()">
		<!-- First, the row of tabs for switching between types -->
		<table><tr>
		<td><span class = "large equip dropdownTab sword0" onclick = "changeDropdownTab(event, 'sword')"></span></td>
		<td><span class = "large equip dropdownTab staff13" onclick = "changeDropdownTab(event, 'staff')"></span></td>
		<td><span class = "large equip dropdownTab gun7" onclick = "changeDropdownTab(event, 'gun')"></span></td>
		<td><span class = "large equip dropdownTab bow0" onclick = "changeDropdownTab(event, 'bow')"></span></td>
		<td><span class = "large equip dropdownTab toy17" onclick = "changeDropdownTab(event, 'toy')"></span></td>
		<td><span class = "large equip dropdownTab hatm0" onclick = "changeDropdownTab(event, 'hatm')"></span></td>
		<td><span class = "large equip dropdownTab armorm15" onclick = "changeDropdownTab(event, 'armorm')"></span></td>
		<td><span class = "large equip dropdownTab hatf0" onclick = "changeDropdownTab(event, 'hatf')"></span></td>
		<td><span class = "large equip dropdownTab armorf0" onclick = "changeDropdownTab(event, 'armorf')"></span></td>
		<td><span class = "large equip dropdownTab flair11" onclick = "changeDropdownTab(event, 'flair')"></span></td>
		</tr></table>
		<!-- Equipment table is placed here! -->
		<div id = "dropdownTable"> </div>
	</div>
	
<noscript>Hello! Despite my best efforts, this site needs JavaScript enabled in order to properly read and modify the save files.</noscript>
<br>
<!-- First, buttons for loading / saving files -->
<label for="loader" class="clickButton">Load Existing File From PC</label>
<input id = "loader" onchange="readFile(this)" accept=".meow" type=file style="display:none" />
<br>
<input value = "Load Default File" class="clickButton" onclick = "loadDefaultFile()" type=button />
<br>
<input value = "Save File" class="clickButton" onclick = "saveFile()" type=button />
<br>
<br>
<!-- The "everything" span is hidden until a file is loaded-->
<span id = "everything" style="display:none">
	<!-- First block for general save file statistics -->
	<details open>
		<summary>General Stats</summary>
		<!-- All stat blocks have in-line script code to set the relevant variable in the fileObj object. This may not be the cleanest way to do it, but it keeps the code local to the input boxes that modify it. -->
		<!-- The misc array stores current SP, max SP, gold, and summon power, in that order. -->
		<span style = "display:inline-block" class="small miscicon misc2"></span>SP: <input type="text" id="currentSP" size="3" 
		onchange="fileObj.misc[0] = this.value" 
		/>
		/
		<!-- Since MaxSP as an editable value has very little use, display a note while it is selected -->
		<input type="text" id="maxSP" size="3" 
		onchange="fileObj.misc[1] = this.value" 
		onfocus = "document.getElementById('SPnote').style = 'display:inline'" 
		onblur = "document.getElementById('SPnote').style = 'display:none'"
		/>
		<span id = "SPnote" class="note" style = 'display:none'>!!! While this is editable, the game overwrites this values upon loading (and caps current SP), so it doesn't do much.</span>
		<br>
		<span style = "display:inline-block" class="small miscicon misc1"></span>Gold: <input type="text" id="gold" size="10" onchange="fileObj.misc[2] = this.value"  />
		<br>
		<span style = "display:inline-block" class="small miscicon misc4"></span> Summon Power: <input type="text" id="summonPower" size="3" 
		onchange="this.value = fileObj.misc[3]" 
		onfocus = "document.getElementById('SummonPowerNote').style = 'display:inline'" 
		onblur = "document.getElementById('SummonPowerNote').style = 'display:none'"
		/>
		<span id = "SummonPowerNote" class="note" style = 'display:none'>!!! This value is re-calculated when the game loads, so there's no use editing it.</span>
		
	</details>
	<br>
	<details>
		<summary>Custom Game</summary>
		(icon) Foe Remix <input type="checkbox" id="foeRemix" onchange="fileObj.altFoes = this.checked"  /><br>
		(icon) Weather Remix <input type="checkbox" id="weatherRemix" onchange="fileObj.altWeather = this.checked"  /><br>
		<span class="keyitem keyitem4 small" style="display:inline-block"></span> Equip Remix <input type="checkbox" id="equipRemix" onchange="fileObj.altEquipStats = this.checked"  /><br>
		<span class="keyitem keyitem10 small" style="display:inline-block"></span> Random Equips <input type="checkbox" id="randomEquips" onchange="fileObj.altEquipLocations = this.checked"  /><br>
		(icon) Scaling Foes <input type="checkbox" id="scalingFoes" onchange="fileObj.alwaysScaleFoes = this.checked"  /><br>
		<br>
		(icon) All-Player Battles <input type="radio" name="limitedPlayers" onchange="updateLimitedPlayerBattles()"  /> (default) <br>
		(icon) 3-Player Battles <input type="radio" name="limitedPlayers" id="3Pbattles" onchange="updateLimitedPlayerBattles()"  /><br>
		(icon) 2-Player Battles <input type="radio" name="limitedPlayers" id="2Pbattles" onchange="updateLimitedPlayerBattles()"  /><br>
		(icon) 1-Player Battles <input type="radio" name="limitedPlayers" id="1Pbattles" onchange="updateLimitedPlayerBattles()"  /><br>
		(indent) Allow individual toggles <input type="checkbox" id="limitLimitedPlayers" onchange="setLimitedPlayerInput(this.checked); updateLimitedPlayerBattles()"  /><br> <!-- This is more advanced than a 1-liner so it gets its own function -->
		<span id = "PlayerBattles" class="note" style = 'display:none'>!!! If multiple player battle options are selected, the lowest-count takes priority.<br>
		However, each option has certain multipliers for enemy stats and status chances, and these multipliers stack with each other.<br>
		(For example, enemies would have ~21% health and ~40% single-target damage with all three on.</span>
		<br>
		
		<details>
			<summary>Random Equips Obtain Order</summary>
			Random Equips works as such:
			The game uses a "seed" value in the save file and generates a new random order in which said equipment is obtained.
			Whenever you would obtain an equipment of a specific type, you'll get the next equipment you don't have from the list.
			(If you haven't "recruited" Lance yet, you may obtain some equips slightly out-of-order due to a programming quirk. To ensure a truly correct order, make sure you quit and load the game after saving.)
			<br>
			Random Equip Seed: <input type="text" id="randomEquipsSeed" size="10" oninput="fileObj.seed = Number(this.value); calculateRandEquips()"  /><br>
			<br>
			In the next update probably, you'll be able to see the order in which you would gain all your equipment types.
			But not now.
			
			(This is a lie actually you can see them but they're extremely unorganized)
			Shop Items:
			<div id="randE_shopItems"></div>
			<div id="upcomingCharEquips"></div>
			<div id="randE_swordList"></div>
			<div id="randE_staffList"></div>
			<div id="randE_gunList"></div>
			<div id="randE_bowList"></div>
			<div id="randE_toyList"></div>
			<div id="randE_hatMList"></div>
			<div id="randE_armorMList"></div>
			<div id="randE_hatFList"></div>
			<div id="randE_armorFList"></div>
			<div id="randE_flairList"></div>
		</details>
	</details>
	<br>
	
	<!-- Giant stats table for the player-relevant save data.
	Most of this is within the playerData table, which is stored in unlabelled array indices.
	Therefore, I will label them here.
	0 = Player level
	1 = Steroid boost multiplier (Starts at 100)
	2 = Limit charge, 0-100
	3 = Array equipment IDs (numerical IDs)
	4 = skill ids?
	5 = Player EXP (Applied after player level)
	6 = Player AP
	7 = limit ids?
	8 = If player is dead (true/false, unused in game)
	-->
	<details open>
		<summary>Party Setup</summary>
		<hr>
		Party Order
		<table>
		<tr id="partyOrder">
			<!-- Have some character portraits with left/right click buttons to shift them around -->
		</tr>
		<tr>
			<td><div class="playericon small player1" style="display: inline-block"></div><input type="checkbox" id="mattInParty" onchange="updatePlayerParty(this.checked, 1)"/></td>
			<td><div class="playericon small player2" style="display: inline-block"></div><input type="checkbox" id="natzInParty" onchange="updatePlayerParty(this.checked, 2)"/></td>
			<td><div class="playericon small player3" style="display: inline-block"></div><input type="checkbox" id="lanceInParty" onchange="updatePlayerParty(this.checked, 3)"/></td>
			<td><div class="playericon small player4" style="display: inline-block"></div><input type="checkbox" id="annaInParty" onchange="updatePlayerParty(this.checked, 4)"/></td>
			<td><div class="playericon small player5" style="display: inline-block"></div><input type="checkbox" id="nolegsInParty" onchange="updatePlayerParty(this.checked, 5)"/></td>
		</tr>
		</table>
		<span id = "EmptyPartyNote" class="note" style = 'display:none'>!!! You can walk around the overworld with an empty party, but will instantly game over upon entering any battle.</span>
		<br>
		<hr>
		Party Loadout
		<table>
		  <thead><tr>
			<th><span style="display: inline-block" class="playericon small player1"></span><span class="textVCenter">Matt</span></th>
			<th><span style="display: inline-block" class="playericon small player2"></span><span class="textVCenter">Natz</span></th>
			<th><span style="display: inline-block" class="playericon small player3"></span><span class="textVCenter">Lance</span></th>
			<th><span style="display: inline-block" class="playericon small player4"></span><span class="textVCenter">Anna</span></th>
			<th><span style="display: inline-block" class="playericon small player5"></span><span class="textVCenter">NoLegs</span></th>
		  </tr></thead>
		  <tr>
			<!-- Levels -->
			<td>Level: <input type="text" id="mattLVL" size="2" onchange="fileObj.playerData[0][0] = this.value; updatePlayerStats()"/> </td>
			<td>Level: <input type="text" id="natzLVL" size="2" onchange="fileObj.playerData[1][0] = this.value; updatePlayerStats()"/> </td>
			<td>Level: <input type="text" id="lanceLVL" size="2" onchange="fileObj.playerData[2][0] = this.value; updatePlayerStats()"/> </td>
			<td>Level: <input type="text" id="annaLVL" size="2" onchange="fileObj.playerData[3][0] = this.value; updatePlayerStats()"/> </td>
			<td>Level: <input type="text" id="nolegsLVL" size="2" onchange="fileObj.playerData[4][0] = this.value; updatePlayerStats()"/> </td>
		  </tr>
		  <tr>
			<!-- EXP -->
			<td>EXP: <input type="text" id="mattEXP" size="7" onchange="fileObj.playerData[0][5] = this.value"/> </td>
			<td>EXP: <input type="text" id="natzEXP" size="7" onchange="fileObj.playerData[1][5] = this.value"/> </td>
			<td>EXP: <input type="text" id="lanceEXP" size="7" onchange="fileObj.playerData[2][5] = this.value"/> </td>
			<td>EXP: <input type="text" id="annaEXP" size="7" onchange="fileObj.playerData[3][5] = this.value"/> </td>
			<td>EXP: <input type="text" id="nolegsEXP" size="7" onchange="fileObj.playerData[4][5] = this.value"/> </td>
		  </tr>
		  <tr>
			<!-- AP -->
			<td>AP: <input type="text" id="mattAP" size="6" onchange="fileObj.playerData[0][6] = this.value"/> </td>
			<td>AP: <input type="text" id="natzAP" size="6" onchange="fileObj.playerData[1][6] = this.value"/> </td>
			<td>AP: <input type="text" id="lanceAP" size="6" onchange="fileObj.playerData[2][6] = this.value"/> </td>
			<td>AP: <input type="text" id="annaAP" size="6" onchange="fileObj.playerData[3][6] = this.value"/> </td>
			<td>AP: <input type="text" id="nolegsAP" size="6" onchange="fileObj.playerData[4][6] = this.value"/> </td>
		  </tr>
		  <tr>
			<!-- LIMIT -->
			<td>Limit: <input type="range" class="limitBar" min="0" max="100" id="mattLimit" onchange="fileObj.playerData[0][2] = this.value"/> </td>
			<td>Limit: <input type="range" class="limitBar" min="0" max="100" id="natzLimit" onchange="fileObj.playerData[1][2] = this.value"/> </td>
			<td>Limit: <input type="range" class="limitBar" min="0" max="100" id="lanceLimit" onchange="fileObj.playerData[2][2] = this.value"/> </td>
			<td>Limit: <input type="range" class="limitBar" min="0" max="100" id="annaLimit" onchange="fileObj.playerData[3][2] = this.value"/> </td>
			<td>Limit: <input type="range" class="limitBar" min="0" max="100" id="nolegsLimit" onchange="fileObj.playerData[4][2] = this.value"/> </td>
		  </tr>
		  <tr>
			<!-- Nested table for amount of steroids used -->
			<!-- Instead of storing the multipliers, they're converted to steroid amounts upon loading and converted back upon saving.
			The ID acronyms stand for "Attack/Defense", "Magic Attack/Magic Defense", "Evade/Accuracy", and "HP" -->
			<td><table>
				<td><span class="medium consumableitem consumableitem24">
					<input type="text" id="mattADstr" class="numberFont iconPosBR" size="1" onchange="fileObj.playerData[0][1][1]=(this.value*2)+100; fileObj.playerData[0][1][4]=(this.value*2)+100; updatePlayerStats()"/>
				</span></td>
				<td><span class="medium consumableitem consumableitem25">
					<input type="text" id="mattMMstr" class="numberFont iconPosBR" size="1" onchange="fileObj.playerData[0][1][2]=(this.value*2)+100; fileObj.playerData[0][1][5]=(this.value*2)+100; updatePlayerStats()"/>
				</span></td>
				<td><span class="medium consumableitem consumableitem26">
					<input type="text" id="mattEAstr" class="numberFont iconPosBR" size="1" onchange="fileObj.playerData[0][1][3]=this.value+100; fileObj.playerData[0][1][6]=this.value+100; updatePlayerStats()"/>
				</span></td>
				<td><span class="medium consumableitem consumableitem27">
					<input type="text" id="mattHPstr" class="numberFont iconPosBR" size="1" onchange="fileObj.playerData[0][1][0]=(this.value*2)+100; updatePlayerStats()"/>
				</span></td>
			</table></td>
			<td><table>
				<td><span class="medium consumableitem consumableitem28">
					<input type="text" id="natzADstr" class="numberFont iconPosBR" size="1" onchange="fileObj.playerData[1][1][1]=(this.value*2)+100; fileObj.playerData[0][1][4]=(this.value*2)+100; updatePlayerStats()"/>
				</span></td>
				<td><span class="medium consumableitem consumableitem29">
					<input type="text" id="natzMMstr" class="numberFont iconPosBR" size="1" onchange="fileObj.playerData[1][1][2]=(this.value*2)+100; fileObj.playerData[0][1][5]=(this.value*2)+100; updatePlayerStats()"/>
				</span></td>
				<td><span class="medium consumableitem consumableitem30">
					<input type="text" id="natzEAstr" class="numberFont iconPosBR" size="1" onchange="fileObj.playerData[1][1][3]=this.value+100; fileObj.playerData[0][1][6]=this.value+100; updatePlayerStats()"/>
				</span></td>
				<td><span class="medium consumableitem consumableitem31">
					<input type="text" id="natzHPstr" class="numberFont iconPosBR" size="1" onchange="fileObj.playerData[1][1][0]=(this.value*2)+100; updatePlayerStats()"/>
				</span></td>
			</table></td>
			<td><table>
				<td><span class="medium consumableitem consumableitem32">
					<input type="text" id="lanceADstr" class="numberFont iconPosBR" size="1" onchange="fileObj.playerData[2][1][1]=(this.value*2)+100; fileObj.playerData[0][1][4]=(this.value*2)+100; updatePlayerStats()"/>
				</span></td>
				<td><span class="medium consumableitem consumableitem33">
					<input type="text" id="lanceMMstr" class="numberFont iconPosBR" size="1" onchange="fileObj.playerData[2][1][2]=(this.value*2)+100; fileObj.playerData[0][1][5]=(this.value*2)+100; updatePlayerStats()"/>
				</span></td>
				<td><span class="medium consumableitem consumableitem34">
					<input type="text" id="lanceEAstr" class="numberFont iconPosBR" size="1" onchange="fileObj.playerData[2][1][3]=this.value+100; fileObj.playerData[0][1][6]=this.value+100; updatePlayerStats()"/>
				</span></td>
				<td><span class="medium consumableitem consumableitem35">
					<input type="text" id="lanceHPstr" class="numberFont iconPosBR" size="1" onchange="fileObj.playerData[2][1][0]=(this.value*2)+100; updatePlayerStats()"/>
				</span></td>
			</table></td>
			<td><table>
				<td><span class="medium consumableitem consumableitem36">
					<input type="text" id="annaADstr" class="numberFont iconPosBR" size="1" onchange="fileObj.playerData[3][1][1]=(this.value*2)+100; fileObj.playerData[0][1][4]=(this.value*2)+100; updatePlayerStats()"/>
				</span></td>
				<td><span class="medium consumableitem consumableitem37">
					<input type="text" id="annaMMstr" class="numberFont iconPosBR" size="1" onchange="fileObj.playerData[3][1][2]=(this.value*2)+100; fileObj.playerData[0][1][5]=(this.value*2)+100; updatePlayerStats()"/>
				</span></td>
				<td><span class="medium consumableitem consumableitem38">
					<input type="text" id="annaEAstr" class="numberFont iconPosBR" size="1" onchange="fileObj.playerData[3][1][3]=this.value+100; fileObj.playerData[0][1][6]=this.value+100; updatePlayerStats()"/>
				</span></td>
				<td><span class="medium consumableitem consumableitem39">
					<input type="text" id="annaHPstr" class="numberFont iconPosBR" size="1" onchange="fileObj.playerData[3][1][0]=(this.value*2)+100; updatePlayerStats()"/>
				</span></td>
			</table></td>
			<td><table>
				<td><span class="medium consumableitem consumableitem40">
					<input type="text" id="nolegsADstr" class="numberFont iconPosBR" size="1" onchange="fileObj.playerData[4][1][1]=(this.value*2)+100; fileObj.playerData[0][1][4]=(this.value*2)+100; updatePlayerStats()"/>
				</span></td>
				<td><span class="medium consumableitem consumableitem41">
					<input type="text" id="nolegsMMstr" class="numberFont iconPosBR" size="1" onchange="fileObj.playerData[4][1][2]=(this.value*2)+100; fileObj.playerData[0][1][5]=(this.value*2)+100; updatePlayerStats()"/>
				</span></td>
				<td><span class="medium consumableitem consumableitem42">
					<input type="text" id="nolegsEAstr" class="numberFont iconPosBR" size="1" onchange="fileObj.playerData[4][1][3]=this.value+100; fileObj.playerData[0][1][6]=this.value+100; updatePlayerStats()"/>
				</span></td>
				<td><span class="medium consumableitem consumableitem43">
					<input type="text" id="nolegsHPstr" class="numberFont iconPosBR" size="1" onchange="fileObj.playerData[4][1][0]=(this.value*2)+100; updatePlayerStats()"/>
				</span></td>
			</table></td>
		  </tr>
		<!-- Nested 2x3 table for character equips -->
		<!-- table filled out in the preparePlayerEquipTable function -->
		  <tr id="playerEquipTable">
			<td>Hello! Here's some filler text!</td>
		  </tr>
		</table>
	</details>
	<br>
	<details open>
		<summary>Player Skills and Limits</summary>
		Work in progress!
	</details>
	<br>
	<details open>
		<summary>Obtained Equipment and Levels</summary>
		<!-- <input value = "Obtain/Remove equipment" class="clickButton" onclick = "//window.alert('me when the')" type=button /> -->
		<!-- Much like the dropdown, set of tabs that switch between available equipment -->
		<table><tr>
		<td><span class = "large equip equipTab sword0" onclick = "changeEquipTab('sword')"></span></td>
		<td><span class = "large equip equipTab staff13" onclick = "changeEquipTab('staff')"></span></td>
		<td><span class = "large equip equipTab gun7" onclick = "changeEquipTab('gun')"></span></td>
		<td><span class = "large equip equipTab bow0" onclick = "changeEquipTab('bow')"></span></td>
		<td><span class = "large equip equipTab toy17" onclick = "changeEquipTab('toy')"></span></td>
		<td><span class = "large equip equipTab hatm0" onclick = "changeEquipTab('hatm')"></span></td>
		<td><span class = "large equip equipTab armorm15" onclick = "changeEquipTab('armorm')"></span></td>
		<td><span class = "large equip equipTab hatf0" onclick = "changeEquipTab('hatf')"></span></td>
		<td><span class = "large equip equipTab armorf0" onclick = "changeEquipTab('armorf')"></span></td>
		<td><span class = "large equip equipTab flair11" onclick = "changeEquipTab('flair')"></span></td>
		</tr></table>
		<!-- Equipment table is placed here! -->
		<div id = "equipTabTable"> </div>
	</details>
	<br>
	<details open>
		<summary>Consumable Items</summary>
		<!-- table filled out in the prepareConsumableitemTable function -->
		<table id="consumableitemTable">
			<td>Hello! Here's some filler text!</td>
		</table>
	</details>
	<br>
	<details open>
		<summary>Crafting Items</summary>
		<!-- table filled out in the prepareCraftitemTable function -->
		<table id="craftitemTable">
			<td>Hello! Here's some filler text!</td>
		</table>
	</details>
	<br>
	<details open>
		<summary>Key Items</summary>
		<!-- table filled out in the prepareKeyitemTable function -->
		<table id="keyitemTable">
			<td>Hello! Here's some filler text!</td>
		</table>
	</details>
</span>

This is currently pretty incomplete!<br>
Up next is going to be various minor things, like steroid costs and finishing up random equip display stuff. <br>
<br>
This site was made possible through reverse engineering game files using FFDec. <br>
Epic Battle Fantasy and all its graphics you see here (also taken from game files) are owned by Matt Roszak. <br>
If you are Matt Roszak and you want this site obliterated harder than my coffee supply after Epic Godcat, email me at qdesmond@proton.me and it shall be done. <br>

<!--
Here's a list of all save file parameters and how many are implemented. I don't know how many I'll actually add support for, but it's a good fake-checklist of sorts.
[D] - Done
[P] - Partially done
[N] - Up next
[S] - Simple to implement
[T] - Tricky to implement
[U] - Unbelievably difficult to implement (these'll probably take a while)
[?] - Unsure of what this entails, so can't tell how difficult it is

misc - [D]
rareItemCosts - [S], stores # of rare items bought instead of costs
eventData - [U]
spellLevels - [T]
spellOwnage - [T]
area - [S]
altWeather - [P], needs icon
seed - [N], progress is progressing but my goodness gracious it not easy
altEquipStats - [D]
textFlags - [U]
altEquipLocations - [D]
altFoes - [P], needs icon
alwaysScaleFoes - [P], needs icon
cheats - [T], presumably also includes challenges
consoles - [S]
alwaysGiveEXP - [S]
customizations - [?]
books - [T], why are there 31 of these? there aren't *that* many at the library...
threePlayerMode - [P], needs icon
limitsList - [?], array that fills up to 20 with only true????
battlesWithCounter - [S]
twoPlayerMode - [P], needs icon
markerData - [?], requires a good chunk of testing
onePlayerMode - [P], needs icon
playerData - [P], missing skills, limits, and dead/not dead (if it still even functions in the game)
equippedSummons - [?], could be mildly tricky or completely hellish
equipSets - [T], just lists of equip ids for the equipment presets
blocks - [?], no idea what this even does
battlesWithResistance - [S]
ownedSummons - [T], mainly just involves figuring out summon ids 
equipLevels - [D]
mapData - [U], dear god those array sizes
summonInfo - [T], summon name, nickname, unknown number variable (amount captured??)
gameStats - [S], a bunch of unlabelled numbers but that's what ffdec is for
party - [D], I guess there's techincally support for duplicate party members missing? But there's literally no point or benefit to doing so, so I don't really think it's necessary
equipOwnage - [D]
shipping - [S], Was surprised at only 6 variables, but that's actually the total number of party pairings for the good ending
recentSummons - [?]
medals - [S], uses true/null instead of true/false for some reason
scans - [T], array of magic strings instead of foe ids like summons use
npcFlags - [U]
questNo - [S], new game/new game+, so on and so forth
itemQuantities - [D]
cardQuantities - [S], says "quantities" but cards are unique so they're all just 0 or 1
-->

</body>
</html>